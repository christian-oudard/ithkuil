TODO:
- reimplement barb in terms of custom endcaps
