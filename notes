TODO:
- reimplement barb in terms of custom endcaps
- reimplement side ending stub with custom endcaps
